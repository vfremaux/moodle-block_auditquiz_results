<<<<<<< HEAD
define ("block_auditquiz_results/auditquiz_results",["jquery","core/log","core/config"],function(a,b,c){return{init:function init(){a(".auditquiz-results-unbind").bind("click",this.unbind_course);b.debug("AMD Auditquiz results initialized")},unbind_course:function unbind_course(b){b.preventDefault();var d=a(this),e=d.attr("id").split("-"),f=e[1],g=e[2],h=e[3],i=c.wwwroot+"/blocks/auditquiz_results/ajax/service.php";i+="?what=unbind";i+="&blockid="+f;i+="&qcatid="+g;i+="&courseid="+h;a.get(i,function(){a("#id-coursebinding-"+g+"-"+h).css("display","none")})}}});
//# sourceMappingURL=auditquiz_results.min.js.map
=======
define("block_auditquiz_results/auditquiz_results",["jquery","core/log","core/config","block_auditquiz_results/html2canvas"],(function($,log,cfg,html2canvas){return{init:function(){$(".auditquiz-results-unbind").bind("click",this.unbind_course),$(".auditquiz-snapshot-btn").bind("click",this.send_image),$(".auditquiz-snapshots").on("click",".auditquiz-snapshot-delete-btn","",this.delete_image),$(".user-sort").bind("click",[],this.change_user_sorting),log.debug("AMD Auditquiz results initialized")},unbind_course:function(e){e.preventDefault();var matches=$(this).attr("id").split("-"),blockid=matches[1],catid=matches[2],courseid=matches[3],url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";url+="?what=unbind",url+="&blockid="+blockid,url+="&qcatid="+catid,url+="&courseid="+courseid,$.get(url,(function(){$("#id-coursebinding-"+catid+"-"+courseid).css("display","none")}),"html")},send_image:function(){var that=$(this),handleid=that.attr("id"),blockid=that.attr("data-blockid"),itemid=that.attr("data-itemid"),snaptype=that.attr("data-type"),plotid=handleid.replace("snapshot-","");html2canvas(document.querySelector("#"+plotid)).then((function(canvas){var url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";log.debug("url set "),canvascontent=canvas.toDataURL(),data={what:"addsnapshot",blockid:blockid,itemid:itemid,snaptype:snaptype,imagedata:canvascontent},$.post(url,data,(function(returndata){$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).html(returndata),$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).css("display","block")}),"html")}))},delete_image:function(){var that=$(this),snapid=that.attr("data-fileid"),itemid=that.attr("data-itemid"),snaptype=that.attr("data-type"),blockid=that.attr("data-blockid"),url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";data={what:"deletesnapshot",snapshotid:snapid,blockid:blockid,itemid:itemid,snaptype:snaptype},$.post(url,data,(function(returndata){$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).html(returndata)}),"html")},change_user_sorting:function(){var that=$(this),sortby=that.attr("data-sort"),blockid=that.attr("data-blockid"),courseid=that.attr("data-courseid"),view=that.attr("data-view"),url=cfg.wwwroot+"/blocks/auditquiz_results/coursereport.php";url+="?view="+view,url+="&blockid="+blockid,url+="&id="+courseid,url+="&sort="+sortby,window.location.href=url}}}));

//# sourceMappingURL=auditquiz_results.min.js.map
>>>>>>> MOODLE_401_STABLE
