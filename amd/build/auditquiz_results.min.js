<<<<<<< HEAD
define("block_auditquiz_results/auditquiz_results",["jquery","core/log","core/config","block_auditquiz_results/html2canvas"],(function($,log,cfg,html2canvas){return{init:function(){$(".auditquiz-results-unbind").bind("click",this.unbind_course),$(".auditquiz-snapshot-btn").bind("click",this.send_image),$(".auditquiz-snapshots").on("click",".auditquiz-snapshot-delete-btn","",this.delete_image),$(".user-sort").bind("click",[],this.change_user_sorting),log.debug("AMD Auditquiz results initialized")},unbind_course:function(e){e.preventDefault();var matches=$(this).attr("id").split("-"),blockid=matches[1],catid=matches[2],courseid=matches[3],url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";url+="?what=unbind",url+="&blockid="+blockid,url+="&qcatid="+catid,url+="&courseid="+courseid,$.get(url,(function(){$("#id-coursebinding-"+catid+"-"+courseid).css("display","none")}),"html")},send_image:function(){var that=$(this),handleid=that.attr("id"),blockid=that.attr("data-blockid"),itemid=that.attr("data-itemid"),snaptype=that.attr("data-type"),plotid=handleid.replace("snapshot-","");html2canvas(document.querySelector("#"+plotid)).then((function(canvas){var url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";log.debug("url set "),canvascontent=canvas.toDataURL(),data={what:"addsnapshot",blockid:blockid,itemid:itemid,snaptype:snaptype,imagedata:canvascontent},$.post(url,data,(function(returndata){$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).html(returndata),$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).css("display","block")}),"html")}))},delete_image:function(){var that=$(this),snapid=that.attr("data-fileid"),itemid=that.attr("data-itemid"),snaptype=that.attr("data-type"),blockid=that.attr("data-blockid"),url=cfg.wwwroot+"/blocks/auditquiz_results/ajax/service.php";data={what:"deletesnapshot",snapshotid:snapid,blockid:blockid,itemid:itemid,snaptype:snaptype},$.post(url,data,(function(returndata){$("#id-auditquiz-snapshots-container-"+itemid+"-"+blockid).html(returndata)}),"html")},change_user_sorting:function(){var that=$(this),sortby=that.attr("data-sort"),blockid=that.attr("data-blockid"),courseid=that.attr("data-courseid"),view=that.attr("data-view"),url=cfg.wwwroot+"/blocks/auditquiz_results/coursereport.php";url+="?view="+view,url+="&blockid="+blockid,url+="&id="+courseid,url+="&sort="+sortby,window.location.href=url}}}));

//# sourceMappingURL=auditquiz_results.min.js.map
=======
define ("block_auditquiz_results/auditquiz_results",["jquery","core/log","core/config","block_auditquiz_results/html2canvas"],function(a,b,c,d){return{init:function init(){a(".auditquiz-results-unbind").bind("click",this.unbind_course);a(".auditquiz-snapshot-btn").bind("click",this.send_image);a(".auditquiz-snapshots").on("click",".auditquiz-snapshot-delete-btn","",this.delete_image);a(".user-sort").bind("click",[],this.change_user_sorting);b.debug("AMD Auditquiz results initialized")},unbind_course:function unbind_course(b){b.preventDefault();var d=a(this),e=d.attr("id").split("-"),f=e[1],g=e[2],h=e[3],i=c.wwwroot+"/blocks/auditquiz_results/ajax/service.php";i+="?what=unbind";i+="&blockid="+f;i+="&qcatid="+g;i+="&courseid="+h;a.get(i,function(){a("#id-coursebinding-"+g+"-"+h).css("display","none")},"html")},send_image:function send_image(){var e=a(this),f=e.attr("id"),g=e.attr("data-blockid"),h=e.attr("data-itemid"),i=e.attr("data-type"),j=f.replace("snapshot-","");d(document.querySelector("#"+j)).then(function(d){var e=c.wwwroot+"/blocks/auditquiz_results/ajax/service.php";b.debug("url set ");canvascontent=d.toDataURL();data={what:"addsnapshot",blockid:g,itemid:h,snaptype:i,imagedata:canvascontent};a.post(e,data,function(b){a("#id-auditquiz-snapshots-container-"+h+"-"+g).html(b);a("#id-auditquiz-snapshots-container-"+h+"-"+g).css("display","block")},"html")})},delete_image:function delete_image(){var b=a(this),d=b.attr("data-fileid"),e=b.attr("data-itemid"),f=b.attr("data-type"),g=b.attr("data-blockid"),h=c.wwwroot+"/blocks/auditquiz_results/ajax/service.php";data={what:"deletesnapshot",snapshotid:d,blockid:g,itemid:e,snaptype:f};a.post(h,data,function(b){a("#id-auditquiz-snapshots-container-"+e+"-"+g).html(b)},"html")},change_user_sorting:function change_user_sorting(){var b=a(this),d=b.attr("data-sort"),e=b.attr("data-blockid"),f=b.attr("data-courseid"),g=b.attr("data-view"),h=c.wwwroot+"/blocks/auditquiz_results/coursereport.php";h+="?view="+g;h+="&blockid="+e;h+="&id="+f;h+="&sort="+d;window.location.href=h}}});
//# sourceMappingURL=auditquiz_results.min.js.map
>>>>>>> c432977fa6f6278cb577e444ef65a0869db15946
