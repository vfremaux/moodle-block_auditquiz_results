<<<<<<< HEAD
{"version":3,"file":"auditquiz_results.min.js","sources":["../src/auditquiz_results.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config', 'block_auditquiz_results/html2canvas'], function($, log, cfg, html2canvas) {\n\n    var auditquizresults = {\n\n        init: function() {\n            $('.auditquiz-results-unbind').bind('click', this.unbind_course);\n            $('.auditquiz-snapshot-btn').bind('click', this.send_image);\n            $('.auditquiz-snapshots').on('click', '.auditquiz-snapshot-delete-btn', '', this.delete_image);\n            $('.user-sort').bind('click', [], this.change_user_sorting);\n\n            log.debug('AMD Auditquiz results initialized');\n        },\n\n        unbind_course: function(e) {\n\n            e.preventDefault();\n\n            var that = $(this);\n\n            var matches = that.attr('id').split('-');\n            var blockid = matches[1];\n            var catid = matches[2];\n            var courseid = matches[3];\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n            url += '?what=unbind';\n            url += '&blockid=' + blockid;\n            url += '&qcatid=' + catid;\n            url += '&courseid=' + courseid;\n\n            $.get(url, function() {\n                // Hide course block.\n                $('#id-coursebinding-' + catid + '-' + courseid).css('display', 'none');\n            }, 'html');\n        },\n\n        send_image: function() {\n\n            var that = $(this);\n            var handleid = that.attr('id');\n            var blockid = that.attr('data-blockid');\n            var itemid = that.attr('data-itemid');\n            var snaptype = that.attr('data-type');\n            var plotid = handleid.replace('snapshot-', '');\n\n            html2canvas(document.querySelector(\"#\" + plotid)).then(function(canvas) {\n                var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n                log.debug('url set ');\n\n                // var feedbackdiv = document.getElementById('id-snapshot-feedback-' + userid + '-' + blockid);\n                // feedbackdiv.appendChild(canvas);\n                canvascontent = canvas.toDataURL();\n\n                data = {\n                    what: 'addsnapshot',\n                    blockid: blockid,\n                    itemid: itemid,\n                    snaptype: snaptype,\n                    imagedata: canvascontent\n                };\n\n                $.post(url, data, function(returndata) {\n                    $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).html(returndata);\n                    // Display if at least one snapshot is commin in.\n                    $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).css('display', 'block');\n                }, 'html');\n            });\n        },\n\n        delete_image: function() {\n\n            var that = $(this);\n            var snapid = that.attr('data-fileid');\n            var itemid = that.attr('data-itemid');\n            var snaptype = that.attr('data-type');\n            var blockid = that.attr('data-blockid');\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n            data = {\n                what: 'deletesnapshot',\n                snapshotid: snapid,\n                blockid: blockid,\n                itemid: itemid,\n                snaptype: snaptype,\n            };\n\n            $.post(url, data, function(returndata) {\n                $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).html(returndata);\n            }, 'html');\n        },\n\n        change_user_sorting: function() {\n\n            var that = $(this);\n            var sortby = that.attr('data-sort');\n            var blockid = that.attr('data-blockid');\n            var courseid = that.attr('data-courseid');\n            var view = that.attr('data-view');\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/coursereport.php';\n            url += '?view=' + view;\n            url += '&blockid=' + blockid;\n            url += '&id=' + courseid;\n            url += '&sort=' + sortby;\n            window.location.href = url;\n        }\n    };\n\n    return auditquizresults;\n\n});"],"names":["define","$","log","cfg","html2canvas","init","bind","this","unbind_course","send_image","on","delete_image","change_user_sorting","debug","e","preventDefault","matches","attr","split","blockid","catid","courseid","url","wwwroot","get","css","that","handleid","itemid","snaptype","plotid","replace","document","querySelector","then","canvas","canvascontent","toDataURL","data","what","imagedata","post","returndata","html","snapid","snapshotid","sortby","view","window","location","href"],"mappings":"AAiBAA,mDAAO,CAAC,SAAU,WAAY,cAAe,wCAAwC,SAASC,EAAGC,IAAKC,IAAKC,mBAEhF,CAEnBC,KAAM,WACFJ,EAAE,6BAA6BK,KAAK,QAASC,KAAKC,eAClDP,EAAE,2BAA2BK,KAAK,QAASC,KAAKE,YAChDR,EAAE,wBAAwBS,GAAG,QAAS,iCAAkC,GAAIH,KAAKI,cACjFV,EAAE,cAAcK,KAAK,QAAS,GAAIC,KAAKK,qBAEvCV,IAAIW,MAAM,sCAGdL,cAAe,SAASM,GAEpBA,EAAEC,qBAIEC,QAFOf,EAAEM,MAEMU,KAAK,MAAMC,MAAM,KAChCC,QAAUH,QAAQ,GAClBI,MAAQJ,QAAQ,GAChBK,SAAWL,QAAQ,GAEnBM,IAAMnB,IAAIoB,QAAU,6CACxBD,KAAO,eACPA,KAAO,YAAcH,QACrBG,KAAO,WAAaF,MACpBE,KAAO,aAAeD,SAEtBpB,EAAEuB,IAAIF,KAAK,WAEPrB,EAAE,qBAAuBmB,MAAQ,IAAMC,UAAUI,IAAI,UAAW,UACjE,SAGPhB,WAAY,eAEJiB,KAAOzB,EAAEM,MACToB,SAAWD,KAAKT,KAAK,MACrBE,QAAUO,KAAKT,KAAK,gBACpBW,OAASF,KAAKT,KAAK,eACnBY,SAAWH,KAAKT,KAAK,aACrBa,OAASH,SAASI,QAAQ,YAAa,IAE3C3B,YAAY4B,SAASC,cAAc,IAAMH,SAASI,MAAK,SAASC,YACxDb,IAAMnB,IAAIoB,QAAU,6CACxBrB,IAAIW,MAAM,YAIVuB,cAAgBD,OAAOE,YAEvBC,KAAO,CACHC,KAAM,cACNpB,QAASA,QACTS,OAAQA,OACRC,SAAUA,SACVW,UAAWJ,eAGfnC,EAAEwC,KAAKnB,IAAKgB,MAAM,SAASI,YACvBzC,EAAE,qCAAuC2B,OAAS,IAAMT,SAASwB,KAAKD,YAEtEzC,EAAE,qCAAuC2B,OAAS,IAAMT,SAASM,IAAI,UAAW,WACjF,YAIXd,aAAc,eAENe,KAAOzB,EAAEM,MACTqC,OAASlB,KAAKT,KAAK,eACnBW,OAASF,KAAKT,KAAK,eACnBY,SAAWH,KAAKT,KAAK,aACrBE,QAAUO,KAAKT,KAAK,gBAEpBK,IAAMnB,IAAIoB,QAAU,6CACxBe,KAAO,CACHC,KAAM,iBACNM,WAAYD,OACZzB,QAASA,QACTS,OAAQA,OACRC,SAAUA,UAGd5B,EAAEwC,KAAKnB,IAAKgB,MAAM,SAASI,YACvBzC,EAAE,qCAAuC2B,OAAS,IAAMT,SAASwB,KAAKD,cACvE,SAGP9B,oBAAqB,eAEbc,KAAOzB,EAAEM,MACTuC,OAASpB,KAAKT,KAAK,aACnBE,QAAUO,KAAKT,KAAK,gBACpBI,SAAWK,KAAKT,KAAK,iBACrB8B,KAAOrB,KAAKT,KAAK,aAEjBK,IAAMnB,IAAIoB,QAAU,6CACxBD,KAAO,SAAWyB,KAClBzB,KAAO,YAAcH,QACrBG,KAAO,OAASD,SAChBC,KAAO,SAAWwB,OAClBE,OAAOC,SAASC,KAAO5B,KAMlC"}
=======
{"version":3,"sources":["../src/auditquiz_results.js"],"names":["define","$","log","cfg","html2canvas","init","bind","unbind_course","send_image","on","delete_image","change_user_sorting","debug","e","preventDefault","that","matches","attr","split","blockid","catid","courseid","url","wwwroot","get","css","handleid","itemid","snaptype","plotid","replace","document","querySelector","then","canvas","canvascontent","toDataURL","data","what","imagedata","post","returndata","html","snapid","snapshotid","sortby","view","window","location","href"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config', 'block_auditquiz_results/html2canvas'], function($, log, cfg, html2canvas) {\n\n    var auditquizresults = {\n\n        init: function() {\n            $('.auditquiz-results-unbind').bind('click', this.unbind_course);\n            $('.auditquiz-snapshot-btn').bind('click', this.send_image);\n            $('.auditquiz-snapshots').on('click', '.auditquiz-snapshot-delete-btn', '', this.delete_image);\n            $('.user-sort').bind('click', [], this.change_user_sorting);\n\n            log.debug('AMD Auditquiz results initialized');\n        },\n\n        unbind_course: function(e) {\n\n            e.preventDefault();\n\n            var that = $(this);\n\n            var matches = that.attr('id').split('-');\n            var blockid = matches[1];\n            var catid = matches[2];\n            var courseid = matches[3];\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n            url += '?what=unbind';\n            url += '&blockid=' + blockid;\n            url += '&qcatid=' + catid;\n            url += '&courseid=' + courseid;\n\n            $.get(url, function() {\n                // Hide course block.\n                $('#id-coursebinding-' + catid + '-' + courseid).css('display', 'none');\n            }, 'html');\n        },\n\n        send_image: function() {\n\n            var that = $(this);\n            var handleid = that.attr('id');\n            var blockid = that.attr('data-blockid');\n            var itemid = that.attr('data-itemid');\n            var snaptype = that.attr('data-type');\n            var plotid = handleid.replace('snapshot-', '');\n\n            html2canvas(document.querySelector(\"#\" + plotid)).then(function(canvas) {\n                var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n                log.debug('url set ');\n\n                // var feedbackdiv = document.getElementById('id-snapshot-feedback-' + userid + '-' + blockid);\n                // feedbackdiv.appendChild(canvas);\n                canvascontent = canvas.toDataURL();\n\n                data = {\n                    what: 'addsnapshot',\n                    blockid: blockid,\n                    itemid: itemid,\n                    snaptype: snaptype,\n                    imagedata: canvascontent\n                };\n\n                $.post(url, data, function(returndata) {\n                    $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).html(returndata);\n                    // Display if at least one snapshot is commin in.\n                    $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).css('display', 'block');\n                }, 'html');\n            });\n        },\n\n        delete_image: function() {\n\n            var that = $(this);\n            var snapid = that.attr('data-fileid');\n            var itemid = that.attr('data-itemid');\n            var snaptype = that.attr('data-type');\n            var blockid = that.attr('data-blockid');\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/ajax/service.php';\n            data = {\n                what: 'deletesnapshot',\n                snapshotid: snapid,\n                blockid: blockid,\n                itemid: itemid,\n                snaptype: snaptype,\n            };\n\n            $.post(url, data, function(returndata) {\n                $('#id-auditquiz-snapshots-container-' + itemid + '-' + blockid).html(returndata);\n            }, 'html');\n        },\n\n        change_user_sorting: function() {\n\n            var that = $(this);\n            var sortby = that.attr('data-sort');\n            var blockid = that.attr('data-blockid');\n            var courseid = that.attr('data-courseid');\n            var view = that.attr('data-view');\n\n            var url = cfg.wwwroot + '/blocks/auditquiz_results/coursereport.php';\n            url += '?view=' + view;\n            url += '&blockid=' + blockid;\n            url += '&id=' + courseid;\n            url += '&sort=' + sortby;\n            window.location.href = url;\n        }\n    };\n\n    return auditquizresults;\n\n});"],"file":"auditquiz_results.min.js"}
>>>>>>> c432977fa6f6278cb577e444ef65a0869db15946
